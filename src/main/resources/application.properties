# Puerto de la aplicación
server.port=5001

# URLs de las APIs existentes
api.product.similarids.url=http://localhost:3001/product/{productId}/similarids
api.product.detail.url=http://localhost:3001/product/{productId}

# Configuración de WebClient
spring.codec.max-in-memory-size=10MB
webclient.max-connections=800
webclient.acquisition-timeout=2000
webclient.max-idle-time=20000
webclient.evict-interval=5000
webclient.connect-timeout=2000
webclient.response-timeout=3000
webclient.read-timeout=3000
webclient.write-timeout=3000
webclient.max-memory-size=16777216

# Configuración avanzada de Netty
webclient.netty.selector-threads=1
webclient.netty.worker-threads=4
reactor.netty.ioWorkerCount=4
reactor.netty.pool.leasingStrategy=lifo
spring.application.netty.connection.provider.max-life-time=30000

# Configuración servidor Netty
server.netty.connection.backlog=4096
server.netty.connection.timeout=30000
server.netty.worker.count=8
server.netty.boss.count=2

# Configuración de Reactor
reactor.schedulers.defaultBoundedElasticSize=100
reactor.schedulers.defaultBoundedElasticQueueSize=100000

# Optimizaciones JVM
spring.jvm.gc.overhead=5
spring.jvm.heap.size=512m

# Configuración de caché
cache.expiration=300
cache.maximum-size=10000
spring.cache.caffeine.spec=maximumSize=10000,expireAfterWrite=300s,recordStats=true

# Configuración de circuit breaker
resilience4j.circuitbreaker.instances.productApi.slidingWindowSize=10
resilience4j.circuitbreaker.instances.productApi.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.productApi.waitDurationInOpenState=5000
resilience4j.circuitbreaker.instances.productApi.failureRateThreshold=50
resilience4j.circuitbreaker.instances.productApi.registerHealthIndicator=true

# Configuraciones de timeouts
spring.mvc.async.request-timeout=30000ms

# Configuraciones de monitoreo
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.metrics.export.prometheus.enabled=true
management.endpoint.health.show-details=always